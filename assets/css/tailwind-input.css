/**
 * Spec Analyzer Tailwind CSS
 *
 * This is the main Tailwind input file that gets processed by Vite.
 *
 * Build: npm run build
 * Dev: npm run dev
 */

/* Import theme variables first */
@import "./theme-variables.css";

/* Tailwind Layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   BASE LAYER - Global defaults
   ============================================ */
@layer base {
    /* Reset and defaults */
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    html {
        font-family: var(--font-sans);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    body {
        @apply bg-brand-bg text-brand-text;
        line-height: 1.6;
        min-height: 100vh;
    }

    /* Typography defaults */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: var(--font-display);
        @apply font-semibold text-brand-text;
        line-height: 1.3;
    }

    h1 {
        @apply text-3xl;
    }
    h2 {
        @apply text-2xl;
    }
    h3 {
        @apply text-xl;
    }
    h4 {
        @apply text-lg;
    }
    h5 {
        @apply text-base font-medium;
    }
    h6 {
        @apply text-sm font-medium;
    }

    /* Links */
    a {
        @apply text-brand-primary hover:text-brand-primary-soft transition-colors duration-150;
    }

    /* Focus states for accessibility */
    :focus-visible {
        @apply outline-none ring-2 ring-brand-primary ring-offset-2;
    }

    /* Selection */
    ::selection {
        @apply bg-brand-primary text-white;
    }
}

/* ============================================
   COMPONENT LAYER - Reusable components
   ============================================ */
@layer components {
    /* ==========================================
     BUTTONS
     ========================================== */

    .btn {
        @apply inline-flex items-center justify-center gap-2
           px-4 py-2.5
           text-sm font-semibold
           rounded-md
           transition-all duration-200
           focus:outline-none focus:ring-2 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed;
    }

    .btn-primary {
        @apply btn
           bg-brand-primary text-white
           hover:bg-brand-primary-soft
           focus:ring-brand-primary;
    }

    .btn-secondary {
        @apply btn
           bg-brand-surface text-brand-text
           border border-brand-border
           hover:bg-gray-50 dark:hover:bg-gray-800
           focus:ring-brand-primary;
    }

    .btn-ghost {
        @apply btn
           bg-transparent text-brand-text-muted
           hover:bg-gray-100 dark:hover:bg-gray-800
           focus:ring-brand-primary;
    }

    .btn-danger {
        @apply btn
           bg-status-danger text-white
           hover:bg-red-600
           focus:ring-status-danger;
    }

    .btn-success {
        @apply btn
           bg-status-success text-white
           hover:bg-green-600
           focus:ring-status-success;
    }

    .btn-sm {
        @apply px-3 py-1.5 text-xs;
    }

    .btn-lg {
        @apply px-6 py-3 text-base;
    }

    .btn-icon {
        @apply btn p-2;
    }

    /* ==========================================
     CARDS
     ========================================== */

    .card {
        @apply bg-brand-surface
           rounded-xl
           border border-brand-border
           shadow-sm
           overflow-hidden;
    }

    .card-interactive {
        @apply card
           hover:shadow-md
           hover:-translate-y-0.5
           cursor-pointer
           transition-all duration-200;
    }

    .card-header {
        @apply px-6 py-4
           bg-brand-primary
           border-b border-brand-border;
    }

    .card-header h2 {
        @apply text-xs font-semibold text-white uppercase tracking-wide m-0;
    }

    .card-header-light {
        @apply bg-brand-surface border-b border-brand-border;
    }

    .card-header-light h2 {
        @apply text-brand-text text-base normal-case tracking-normal;
    }

    .card-body {
        @apply px-6 py-5;
    }

    .card-footer {
        @apply px-6 py-4 border-t border-brand-border bg-slate-50/50 dark:bg-slate-800/30;
    }

    /* ==========================================
     NAVIGATION BAR
     ========================================== */

    .top-nav-bar {
        @apply bg-brand-surface border-b border-brand-border
           px-6 h-[60px]
           sticky top-0 z-fixed;
    }

    .nav-container {
        @apply max-w-7xl mx-auto h-full
           flex items-center justify-between;
    }

    .nav-left {
        @apply flex items-center gap-4;
    }

    .nav-right {
        @apply flex items-center gap-4;
    }

    .logo-link {
        @apply flex items-center gap-3 no-underline
           transition-opacity hover:opacity-85;
    }

    .logo-text {
        @apply text-xl font-bold text-brand-primary;
        font-family: var(--font-display);
    }

    .beta-pill {
        @apply bg-brand-primary/10 text-brand-primary
           text-[10px] font-bold
           px-2 py-0.5
           rounded-full uppercase tracking-wide;
    }

    .user-avatar {
        @apply w-9 h-9
           bg-brand-primary text-white
           rounded-full
           flex items-center justify-center
           text-sm font-semibold
           cursor-pointer
           transition-colors hover:bg-brand-primary-soft;
    }

    .btn-nav-logout {
        @apply bg-transparent text-brand-text-muted
           border border-brand-border
           px-4 py-1.5
           rounded-md text-sm font-medium
           cursor-pointer
           transition-all
           hover:bg-brand-bg hover:border-brand-text-muted hover:text-brand-text;
    }

    /* ==========================================
     CONTAINERS
     ========================================== */

    .container {
        @apply max-w-6xl mx-auto px-6
           min-h-[calc(100vh-60px)]
           flex flex-col;
    }

    .container-narrow {
        @apply max-w-3xl;
    }

    .container-wide {
        @apply max-w-7xl;
    }

    /* ==========================================
     FORMS
     ========================================== */

    .form-group {
        @apply mb-6;
    }

    .form-label {
        @apply block text-sm font-medium text-brand-text mb-1.5;
    }

    .form-control,
    .form-input,
    .input-field {
        @apply w-full px-4 py-2.5
           text-base text-brand-text
           bg-brand-surface
           border border-brand-border rounded-md
           transition-all duration-150
           focus:outline-none focus:border-brand-primary focus:ring-2 focus:ring-brand-primary/20
           placeholder:text-brand-text-muted;
    }

    textarea.form-control,
    textarea.form-input {
        @apply resize-y min-h-[100px];
    }

    .trade-select {
        @apply form-control
           appearance-none cursor-pointer
           pr-10
           bg-no-repeat;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-position: right 0.75rem center;
        background-size: 18px;
    }

    /* ==========================================
     BADGES
     ========================================== */

    .badge {
        @apply inline-flex items-center gap-1.5
           px-2.5 py-1
           text-xs font-semibold
           rounded-full;
    }

    .badge-default {
        @apply badge bg-brand-bg text-brand-text-muted;
    }

    .badge-primary {
        @apply badge bg-brand-primary/10 text-brand-primary;
    }

    .badge-success {
        @apply badge bg-status-success/10 text-status-success;
    }

    .badge-warning {
        @apply badge bg-status-warning/10 text-status-warning;
    }

    .badge-danger {
        @apply badge bg-status-danger/10 text-status-danger;
    }

    /* Status badges with dot */
    .status-badge {
        @apply badge;
    }

    .status-icon {
        @apply text-[8px];
    }

    .status-done {
        @apply bg-status-success/10 text-status-success;
    }

    .status-processing {
        @apply bg-brand-primary/10 text-brand-primary;
    }

    .status-processing .status-icon {
        @apply animate-pulse;
    }

    .status-failed {
        @apply bg-status-danger/10 text-status-danger;
    }

    .status-ready {
        @apply bg-gray-100 text-brand-text-muted;
    }

    /* ==========================================
     UPLOAD BOX
     ========================================== */

    .upload-box {
        @apply border-2 border-dashed border-brand-border
           rounded-xl
           py-12 px-6
           text-center cursor-pointer
           bg-brand-bg
           transition-all duration-200
           hover:border-brand-primary hover:bg-brand-primary/5;
    }

    .upload-box.dragover {
        @apply border-brand-primary bg-brand-primary/5 border-solid;
    }

    .upload-icon {
        @apply text-brand-text-muted mb-3;
    }

    .upload-text {
        @apply text-base font-semibold text-brand-text mb-1;
    }

    .upload-hint {
        @apply text-sm text-brand-text-muted;
    }

    /* ==========================================
     LOADING STATES
     ========================================== */

    .loading-body {
        @apply text-center py-12 px-6;
    }

    .loading-spinner {
        @apply w-11 h-11
           border-[3px] border-brand-border border-t-brand-primary
           rounded-full
           animate-spin
           mx-auto mb-6;
    }

    .loading-status {
        @apply text-brand-text-muted text-sm;
    }

    .progress-container {
        @apply w-full max-w-md mx-auto mt-6;
    }

    .progress-bar {
        @apply w-full h-1.5
           bg-brand-bg
           rounded-full overflow-hidden
           mb-1.5;
    }

    .progress-fill {
        @apply h-full
           bg-gradient-to-r from-brand-primary to-status-success
           rounded-full
           transition-all duration-300;
    }

    .progress-text {
        @apply text-sm text-brand-text-muted text-center;
    }

    /* ==========================================
     ERROR STATES
     ========================================== */

    .error-body {
        @apply text-center py-12 px-6;
    }

    .error-icon {
        @apply text-status-danger mb-4;
    }

    .error-message {
        @apply text-brand-text-muted mb-6;
    }

    /* ==========================================
     EMPTY STATES
     ========================================== */

    .empty-state {
        @apply text-center py-12 px-6 text-brand-text-muted;
    }

    .empty-state-icon {
        @apply text-5xl mb-4;
    }

    .empty-state-title {
        @apply text-lg font-semibold text-brand-text mb-1;
    }

    .empty-state-text {
        @apply text-sm text-brand-text-muted mb-6;
    }

    /* ==========================================
     RESULTS CONTENT (Markdown)
     ========================================== */

    .results-container,
    .results-content {
        @apply p-6 leading-relaxed text-brand-text-muted;
    }

    .results-header {
        @apply flex justify-between items-center flex-wrap gap-4
           px-6 py-4
           bg-brand-primary;
    }

    .results-header h2 {
        @apply text-xs font-semibold text-white uppercase tracking-wide m-0;
    }

    .results-actions {
        @apply flex gap-3;
    }

    .results-content h1 {
        @apply text-xl font-bold text-brand-text
           mt-6 mb-3 pb-2
           border-b border-brand-border;
    }

    .results-content h1:first-child {
        @apply mt-0;
    }

    .results-content h2 {
        @apply text-lg font-semibold text-brand-primary
           mt-6 mb-3;
    }

    .results-content h3 {
        @apply text-base font-semibold text-brand-text
           mt-4 mb-2;
    }

    .results-content p {
        @apply my-2;
    }

    .results-content ul,
    .results-content ol {
        @apply ml-6 mb-3;
    }

    .results-content li {
        @apply my-1.5;
    }

    .results-content strong {
        @apply text-brand-text font-semibold;
    }

    .results-content code {
        @apply bg-brand-bg px-1.5 py-0.5 rounded text-sm text-brand-primary;
        font-family: var(--font-mono);
    }

    .results-content pre {
        @apply bg-brand-bg p-4 rounded-md overflow-x-auto my-3 border border-brand-border;
    }

    .results-content table {
        @apply w-full border-collapse my-3;
    }

    .results-content th,
    .results-content td {
        @apply px-4 py-3 text-left border-b border-brand-border;
    }

    .results-content th {
        @apply text-brand-text font-semibold bg-brand-bg;
    }

    .results-content hr {
        @apply border-t border-brand-border my-6;
    }

    /* ==========================================
     MODALS
     ========================================== */

    .modal-overlay {
        @apply fixed inset-0
           bg-slate-900/60 backdrop-blur-sm
           flex items-center justify-center
           z-modal-backdrop
           p-6;
    }

    .modal {
        @apply bg-brand-surface
           border border-brand-border
           rounded-xl
           w-full max-w-lg max-h-[90vh]
           overflow-y-auto
           shadow-xl
           animate-scale-in;
    }

    .modal-sm {
        @apply max-w-sm;
    }

    .modal-lg {
        @apply max-w-2xl;
    }

    .modal-header {
        @apply flex justify-between items-center
           px-6 py-4
           border-b border-brand-border;
    }

    .modal-header h3 {
        @apply text-base font-semibold text-brand-text m-0;
    }

    .modal-close {
        @apply bg-transparent border-none
           text-brand-text-muted text-2xl leading-none
           cursor-pointer
           p-0 w-8 h-8
           flex items-center justify-center
           rounded-md
           transition-all
           hover:bg-brand-bg hover:text-brand-text;
    }

    .modal-body {
        @apply p-6;
    }

    .modal-footer {
        @apply flex justify-end gap-3
           px-6 py-4
           border-t border-brand-border;
    }

    /* ==========================================
     ANALYSIS OPTIONS GRID
     ========================================== */

    .analysis-options {
        @apply grid grid-cols-2 gap-3 mb-4;
    }

    .analysis-option {
        @apply flex flex-col items-center gap-2
           p-4
           border border-brand-border rounded-xl
           bg-brand-surface
           cursor-pointer
           text-center text-brand-text-muted
           transition-all duration-200
           hover:border-brand-primary hover:bg-brand-primary/5 hover:text-brand-text;
    }

    .analysis-option.selected {
        @apply border-brand-primary bg-brand-primary/5 text-brand-primary;
    }

    .option-icon {
        @apply text-2xl;
    }

    /* ==========================================
     ANALYSES GRID (Job Analyses Page)
     ========================================== */

    .analyses-grid {
        @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;
    }

    .analysis-card {
        @apply card p-6 cursor-pointer
           transition-all duration-200
           hover:border-brand-primary hover:shadow-md hover:-translate-y-0.5;
    }

    .analysis-card-header {
        @apply flex justify-between items-start mb-3;
    }

    .analysis-card-title {
        @apply text-base font-semibold text-brand-text m-0;
    }

    .analysis-card-meta {
        @apply text-sm text-brand-text-muted mb-3;
    }

    .analysis-card-type {
        @apply badge-primary;
    }

    /* ==========================================
     PAGE HEADER
     ========================================== */

    .page-header {
        @apply flex justify-between items-center
           mb-8 flex-wrap gap-4;
    }

    .page-header-content h1 {
        @apply text-2xl font-bold text-brand-text mb-1 mt-0;
    }

    .page-header-content p {
        @apply text-sm text-brand-text-muted m-0;
    }

    .action-buttons {
        @apply flex gap-3 justify-end flex-wrap;
    }

    /* ==========================================
     PAGE FOOTER
     ========================================== */

    .page-footer {
        @apply text-center py-6 text-sm text-brand-text-muted mt-auto;
    }
}

/* ============================================
   UTILITY LAYER - Custom utilities
   ============================================ */
@layer utilities {
    /* Hide scrollbar but keep functionality */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Truncate with ellipsis */
    .truncate-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .truncate-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Touch-friendly tap target */
    .tap-target {
        @apply min-h-[44px] min-w-[44px];
    }

    /* Glass effect */
    .glass {
        @apply bg-white/80 dark:bg-gray-900/80 backdrop-blur-md;
    }

    /* Gradient text */
    .text-gradient {
        @apply bg-gradient-to-r from-brand-primary to-brand-primary-soft
           bg-clip-text text-transparent;
    }
}

/* ============================================
   MOBILE RESPONSIVE
   ============================================ */

@media (max-width: 768px) {
    /* Prevent iOS zoom on input focus */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="date"],
    input[type="time"],
    input[type="search"],
    select,
    textarea {
        font-size: 16px;
    }
}

/* Safe area insets for notched phones */
@supports (padding: max(0px)) {
    @media (max-width: 768px) {
        .safe-area-padding {
            padding-left: max(1rem, env(safe-area-inset-left));
            padding-right: max(1rem, env(safe-area-inset-right));
            padding-bottom: max(1rem, env(safe-area-inset-bottom));
        }
    }
}

/* Touch feedback */
@media (max-width: 768px) {
    button:active,
    .btn:active,
    .card-interactive:active {
        transform: scale(0.98);
        opacity: 0.9;
    }
}
